# Index

## 인덱스란

인덱스(Index)는 데이터베이스에서 테이블의 특정 컬럼에 대한 검색 속도를 향상시키기 위해 사용되는 자료 구조입니다. 인덱스는 책의 목차와 유사한 역할을 하며, 데이터베이스가 원하는 데이터를 빠르게 찾을 수 있도록 도와줍니다.

칼럼의 값을 기준으로 정렬된 자료 구조를 만들어, 검색 시 전체 테이블을 스캔하지 않고도 원하는 데이터를 빠르게 찾을 수 있습니다. 인덱스는 주로 B-트리(Balanced Tree)나 해시 테이블(Hash Table)과 같은 자료 구조를 사용하여 구현됩니다.

### B - Tree

B-트리는 균형 잡힌 트리 구조로, 각 노드가 여러 개의 자식을 가질 수 있습니다. B-트리는 데이터베이스 인덱스에서 가장 많이 사용되는 자료 구조 중 하나입니다. B-트리는 다음과 같은 특징을 가지고 있습니다

- **균형 유지**: B-트리는 항상 균형을 유지하여, 모든 리프 노드가 같은 깊이에 위치합니다. 이를 통해 검색, 삽입, 삭제 연산의 시간 복잡도가 O(log n)으로 유지됩니다.
- **다중 자식 노드**: 각 노드는 여러 개의 자식을 가질 수 있어, 트리의 높이를 낮추고 검색 속도를 향상시킵니다.
- **범위 검색**: B-트리는 범위 검색에 효율적입니다. 예를 들어, 특정 범위 내의 값을 검색할 때, B-트리는 해당 범위의 시작과 끝을 빠르게 찾을 수 있습니다.
- **디스크 I/O 최소화**: B-트리는 디스크 기반 데이터베이스에서 효율적으로 작동하도록 설계되었습니다. 노드 크기를 디스크 블록 크기에 맞추어, 디스크 I/O 횟수를 최소화합니다. 


#### 인덱스 레인지 스캔

인덱스 레인지 스캔(Index Range Scan)은 인덱스를 사용하여 특정 범위 내의 데이터를 검색하는 방법입니다. 예를 들어, 특정 날짜 범위 내의 주문을 검색하거나, 특정 가격 범위 내의 상품을 찾는 경우에 사용됩니다.

인덱스 레인지 스캔은 B-트리와 같은 자료 구조에서 효율적으로 수행됩니다. B-트리는 정렬된 구조이기 때문에, 범위의 시작점과 끝점을 빠르게 찾을 수 있습니다. 검색 과정은 다음과 같습니다:

1. 인덱스에서 조건을 만족하는 값이 저장된 위치를 찾는다. 이 과정을 인덱스 탐색 이라고 한다.
2. 1번에서 탐색된 위치부터 필요한 만큼 인덱스를 차례대로 쭉 읽는다. 이 과정을 인덱스 스캔 이라고 한다.
3. 2번에서 읽어들인 인덱스 키와 레코드 주소를 이용해 레코드가 저장된 페이지를 가져오고, 최종 레코드를 읽어온다.

#### 인덱스 풀 스캔

인덱스 풀 스캔(Index Full Scan)은 인덱스의 모든 엔트리를 순차적으로 읽는 방법입니다. 이는 인덱스가 테이블의 모든 행을 포함하고 있을 때 사용됩니다. 

대표적으로 쿼리의 조건절에 사용된 카럼이 인덱스의 첫 번째 칼럼이 아닌 경우 인덱스 풀 스캔 방식이 사용됩니다.

인덱스 풀 스캔은 다음과 같은 상황에서 유용할 수 있습니다:

1. **전체 데이터 조회**: 테이블의 모든 데이터를 조회해야 하는 경우, 인덱스 풀 스캔이 효율적일 수 있습니다.
2. **인덱스 통계 수집**: 데이터베이스 옵티마이저가 쿼리 계획을 수립하기 위해 인덱스 통계를 수집할 때 사용됩니다.
3. **인덱스 유지 관리**: 인덱스의 조정이나 재구성을 위해 모든 엔트리를 읽어야 할 때 유용합니다.


#### 루스 인덱스 스캔

루스 인덱스 스캔(Loose Index Scan)은 인덱스를 사용하여 특정 조건을 만족하는 데이터를 효율적으로 검색하는 방법입니다. 루스 인덱스 스캔은 일반적인 인덱스 스캔과 달리, 인덱스의 모든 엔트리를 읽지 않고도 원하는 데이터를 찾을 수 있는 경우에 사용됩니다.

말 그래도 듬성듬성하게 인덱스를 읽는 것을 의미

인덱스 레인지스캔과 비슷하게 작동하지만 중간에 필요하지 않은 인덱스 키 값은 무시하고(SKIP) 건너뛰는 방식으로 작동합니다.

#### 인덱스 스킵 스캔

인덱스 스킵 스캔(Index Skip Scan)은 복합 인덱스(Composite Index)에서 특정 조건을 만족하는 데이터를 효율적으로 검색하는 방법입니다. 복합 인덱스는 여러 개의 칼럼을 결합하여 하나의 인덱스를 생성하는데, 인덱스 스킵 스캔은 이 복합 인덱스에서 일부 칼럼의 값이 고정되어 있지 않은 경우에도 검색을 수행할 수 있습니다.

인덱스 스킵 스캔은 다음과 같은 상황에서 유용할 수 있습니다:

1. **복합 인덱스의 일부 칼럼만 사용**: 복합 인덱스에서 첫 번째 칼럼이 아닌 다른 칼럼을 조건절에 사용하는 경우, 인덱스 스킵 스캔이 효율적일 수 있습니다.
2. **다양한 조건 조합**: 복합 인덱스의 여러 칼럼에 대해 다양한 조건 조합을 사용할 때, 인덱스 스킵 스캔이 유용합니다.
3. **성능 향상**: 인덱스 스킵 스캔은 불필요한 인덱스 엔트리를 건너뛰어 검색 속도를 향상시킬 수 있습니다.    

